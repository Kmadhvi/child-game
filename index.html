<!DOCTYPE html>
<html>
<head>
  <title>Kids Smart Learning Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial;
      text-align: center;
      background: linear-gradient(to right, #a1c4fd, #c2e9fb);
      margin: 0;
    }

    h1 { margin-top: 20px; }

    .menu button, .option, .back-btn {
      font-size: 20px;
      padding: 12px;
      margin: 10px;
      border-radius: 15px;
      border: none;
      cursor: pointer;
    }

    .menu button { background: #ff6f61; color: white; }
    .back-btn { background: #444; color: white; }

    .game { display: none; }

    .options {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    .option {
      width: 120px;
      height: 120px;
      background: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      transition: transform 0.2s;
    }

    .option:hover { transform: scale(1.2); }

    #score {
      font-size: 20px;
      margin: 10px;
    }

    .correct { color: green; animation: pop 0.4s; }
    .wrong { color: red; }

    #achievement {
      font-size: 22px;
      color: purple;
      display: none;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
    }

    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.4); }
      100% { transform: scale(1); }
    }
  </style>
</head>

<body>

<h1>üéÆ Kids Learning Game</h1>

<div class="menu">
  <button onclick="startGame('alphabet')">ABC Game</button>
  <button onclick="startGame('number')">123 Game</button>
</div>

<div class="game">
  <button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
  <h2 id="question"></h2>
  <div id="score">‚≠ê Score: 0</div>
  <div id="achievement">üèÜ Achievement Unlocked!</div>
  <div class="options" id="options"></div>
  <p id="result"></p>
</div>

<canvas id="confetti"></canvas>

<script>
// DATA
const alphabets = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(l => ({ letter: l, img: "üî§" }));

const numbers = Array.from({length:10}, (_,i)=> ({
  num: (i+1).toString(),
  img: "‚≠ê".repeat(i+1)
}));

let mode = "";
let score = 0;
let correctAnswer = "";
let achievementUnlocked = false;

// Voice
function speak(text) {
  let msg = new SpeechSynthesisUtterance(text);
  speechSynthesis.cancel();
  speechSynthesis.speak(msg);
}

// Start
function startGame(selectedMode) {
  mode = selectedMode;
  score = 0;
  achievementUnlocked = false;

  document.querySelector(".menu").style.display = "none";
  document.querySelector(".game").style.display = "block";
  document.getElementById("achievement").style.display = "none";

  loadQuestion();
}

// Back button
function goBack() {
  document.querySelector(".menu").style.display = "block";
  document.querySelector(".game").style.display = "none";
}

// Shuffle
function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

// Load Question
function loadQuestion() {
  let data = mode === "alphabet" ? alphabets : numbers;

  let randomItem = data[Math.floor(Math.random() * data.length)];
  correctAnswer = mode === "alphabet" ? randomItem.letter : randomItem.num;

  document.getElementById("question").innerText = "Tap " + correctAnswer;
  speak("Tap " + correctAnswer);

  let options = shuffle(data).slice(0, 4);

  if (!options.find(o => (mode==="alphabet"?o.letter:o.num) === correctAnswer)) {
    options[0] = randomItem;
  }

  let html = "";
  options.forEach(item => {
    let value = mode === "alphabet" ? item.letter : item.num;
    html += `<div class="option" onclick="check('${value}')">
      <div>${value}</div>
      <div>${item.img}</div>
    </div>`;
  });

  document.getElementById("options").innerHTML = html;
  document.getElementById("result").innerText = "";
}

// Sound
function playSound(correct) {
  let audio = new Audio(correct
    ? "https://www.soundjay.com/buttons/sounds/button-4.mp3"
    : "https://www.soundjay.com/buttons/sounds/button-10.mp3"
  );
  audio.play();
}

// Confetti üéâ
function launchConfetti() {
  let canvas = document.getElementById("confetti");
  let ctx = canvas.getContext("2d");

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  let pieces = Array.from({length:100}, () => ({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    r: Math.random()*6+2,
    d: Math.random()*50
  }));

  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p => {
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fill();
    });
    update();
  }

  function update() {
    pieces.forEach(p => {
      p.y += Math.cos(p.d) + 1;
      if(p.y > canvas.height) p.y = 0;
    });
  }

  let interval = setInterval(draw, 30);
  setTimeout(()=>clearInterval(interval), 3000);
}

// Check
function check(value) {
  let result = document.getElementById("result");

  if (value === correctAnswer) {
    score++;
    result.innerText = "üéâ Awesome!";
    result.className = "correct";
    playSound(true);

    document.getElementById("score").innerText = "‚≠ê Score: " + score;

    // üéØ Achievement at 15
    if (score >= 15 && !achievementUnlocked) {
      achievementUnlocked = true;
      document.getElementById("achievement").style.display = "block";
      launchConfetti();
      speak("Great job! Achievement unlocked!");
    }

    setTimeout(loadQuestion, 900);

  } else {
    result.innerText = "‚ùå Try Again!";
    result.className = "wrong";
    playSound(false);
  }
}
</script>

</body>
</html>
